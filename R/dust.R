## Generated by dust (version 0.5.7) - do not edit
basic <- R6::R6Class(
  "dust",
  cloneable = FALSE,

  private = list(
    data_ = NULL,
    index_ = NULL,
    info_ = NULL,
    n_threads_ = NULL,
    ptr_ = NULL,
    param_ = list(beta_step = list(has_default = FALSE, default_value = NULL,
    rank = 1, min = -Inf, max = Inf, integer = FALSE), dt = list(
    has_default = FALSE, default_value = NULL, rank = 0, min = -Inf,
    max = Inf, integer = FALSE), hosp_transmission = list(has_default = FALSE,
    default_value = NULL, rank = 0, min = -Inf, max = Inf, integer = FALSE),
    ICU_transmission = list(has_default = FALSE, default_value = NULL,
        rank = 0, min = -Inf, max = Inf, integer = FALSE), m = list(
        has_default = FALSE, default_value = NULL, rank = 2,
        min = -Inf, max = Inf, integer = FALSE), n_age_groups = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), p_C = list(has_default = FALSE,
        default_value = NULL, rank = 1, min = -Inf, max = Inf,
        integer = FALSE), p_death_hosp = list(has_default = FALSE,
        default_value = NULL, rank = 1, min = -Inf, max = Inf,
        integer = FALSE), p_H = list(has_default = FALSE, default_value = NULL,
        rank = 1, min = -Inf, max = Inf, integer = FALSE), p_recov_hosp = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_recov_ICU = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), s_A = list(has_default = FALSE,
        default_value = NULL, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), s_C = list(has_default = FALSE, default_value = NULL,
        rank = 0, min = -Inf, max = Inf, integer = FALSE), s_E = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_hosp = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_ICU = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_rec = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), gamma_A = list(
        has_default = TRUE, default_value = 0.1, rank = 0, min = -Inf,
        max = Inf, integer = FALSE), gamma_C = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_E = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_hosp = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_ICU = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_rec = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), n_trans_classes = list(has_default = TRUE,
        default_value = 1L, rank = 0, min = -Inf, max = Inf,
        integer = FALSE)),

    simulate = function(steps, data, state, index = NULL,
                        n_threads = 1L, seed = NULL,
                        return_state = FALSE) {
      dust_basic_simulate(steps, data, state, index, n_threads, seed,
                             return_state)
    }
  ),

  public = list(
    initialize = function(data, step, n_particles, n_threads = 1L,
                          seed = NULL) {
      res <- dust_basic_alloc(data, step, n_particles,
                        n_threads, seed)
      private$data_ <- data
      private$n_threads_ <- n_threads
      private$ptr_ <- res[[1L]]
      private$info_ <- res[[2L]]
    },

    name = function() {
      "basic"
    },

    param = function() {
      private$param_
    },

    run = function(step_end) {
      m <- dust_basic_run(private$ptr_, step_end)
      rownames(m) <- names(private$index_)
      m
    },

    set_index = function(index) {
      dust_basic_set_index(private$ptr_, index)
      private$index_ <- index
      invisible()
    },

    index = function() {
      private$index_
    },

    n_threads = function() {
      private$n_threads_
    },

    set_state = function(state, step = NULL) {
      dust_basic_set_state(private$ptr_, state, step)
    },

    reset = function(data, step) {
      private$info_ <- dust_basic_reset(private$ptr_, data, step)
      private$index_ <- NULL
      private$data_ <- data
      invisible()
    },

    set_data = function(data) {
      private$info_ <- dust_basic_set_data(private$ptr_, data)
      private$data_ <- data
    },

    state = function(index = NULL) {
      m <- dust_basic_state(private$ptr_, index)
      rownames(m) <- names(index)
      m
    },

    step = function() {
      dust_basic_step(private$ptr_)
    },

    reorder = function(index) {
      dust_basic_reorder(private$ptr_, as.integer(index))
      invisible()
    },

    info = function() {
      private$info_
    },

    data = function() {
      private$data_
    },

    rng_state = function(first_only = FALSE) {
      dust_basic_rng_state(private$ptr_, first_only)
    },

    set_rng_state = function(rng_state) {
      dust_basic_set_rng_state(private$ptr_, rng_state)
      invisible()
    },

    has_openmp = function() {
      dust_basic_has_openmp()
    },

    set_n_threads = function(n_threads) {
      prev <- private$n_threads_
      dust_basic_set_n_threads(private$ptr_, n_threads)
      private$n_threads_ <- n_threads
      invisible(prev)
    }
  ))
class(basic) <- c("dust_generator", class(basic))
carehomes <- R6::R6Class(
  "dust",
  cloneable = FALSE,

  private = list(
    data_ = NULL,
    index_ = NULL,
    info_ = NULL,
    n_threads_ = NULL,
    ptr_ = NULL,
    param_ = list(beta_step = list(has_default = FALSE, default_value = NULL,
    rank = 1, min = -Inf, max = Inf, integer = FALSE), dt = list(
    has_default = FALSE, default_value = NULL, rank = 0, min = -Inf,
    max = Inf, integer = FALSE), G_D_transmission = list(has_default = FALSE,
    default_value = NULL, rank = 0, min = -Inf, max = Inf, integer = FALSE),
    hosp_transmission = list(has_default = FALSE, default_value = NULL,
        rank = 0, min = -Inf, max = Inf, integer = FALSE), ICU_transmission = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), m = list(has_default = FALSE,
        default_value = NULL, rank = 2, min = -Inf, max = Inf,
        integer = FALSE), n_age_groups = list(has_default = FALSE,
        default_value = NULL, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), n_groups = list(has_default = FALSE,
        default_value = NULL, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), p_admit_conf_step = list(has_default = FALSE,
        default_value = NULL, rank = 1, min = -Inf, max = Inf,
        integer = FALSE), p_C = list(has_default = FALSE, default_value = NULL,
        rank = 1, min = -Inf, max = Inf, integer = FALSE), p_death_comm_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_death_hosp_D_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_death_ICU_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_death_stepdown_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_H_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_ICU_hosp_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), p_seroconversion = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_admit_conf = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_death_comm = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_death_hosp_D = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_death_ICU = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_death_stepdown = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_H = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), psi_ICU_hosp = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), rel_p_C = list(
        has_default = FALSE, default_value = NULL, rank = 2,
        min = -Inf, max = Inf, integer = FALSE), rel_p_H = list(
        has_default = FALSE, default_value = NULL, rank = 2,
        min = -Inf, max = Inf, integer = FALSE), rel_susceptibility = list(
        has_default = FALSE, default_value = NULL, rank = 2,
        min = -Inf, max = Inf, integer = FALSE), s_A = list(has_default = FALSE,
        default_value = NULL, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), s_C = list(has_default = FALSE, default_value = NULL,
        rank = 0, min = -Inf, max = Inf, integer = FALSE), s_E = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_G_D = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_hosp_D = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_hosp_R = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_ICU_D = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_ICU_S_D = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_ICU_S_R = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_PCR_pos = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_PCR_pre = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_R_pos = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_stepdown_D = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_stepdown_R = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), s_triage = list(
        has_default = FALSE, default_value = NULL, rank = 0,
        min = -Inf, max = Inf, integer = FALSE), strain_seed_step = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), strain_transmission = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), vaccine_population_reluctant = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), vaccine_progression_rate_base = list(
        has_default = FALSE, default_value = NULL, rank = 2,
        min = -Inf, max = Inf, integer = FALSE), waning_rate = list(
        has_default = FALSE, default_value = NULL, rank = 1,
        min = -Inf, max = Inf, integer = FALSE), gamma_A = list(
        has_default = TRUE, default_value = 0.1, rank = 0, min = -Inf,
        max = Inf, integer = FALSE), gamma_C = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_E = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_G_D = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_hosp_D = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_hosp_R = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_ICU_D = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_ICU_S_D = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_ICU_S_R = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_PCR_pos = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_PCR_pre = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_R_pos = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_R_pre_1 = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_R_pre_2 = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_stepdown_D = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_stepdown_R = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_test = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), gamma_triage = list(has_default = TRUE,
        default_value = 0.1, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), model_pcr_and_serology_user = list(
        has_default = TRUE, default_value = 1L, rank = 0, min = -Inf,
        max = Inf, integer = FALSE), p_R_pre_1 = list(has_default = TRUE,
        default_value = 0.5, rank = 0, min = -Inf, max = Inf,
        integer = FALSE), vaccine_daily_doses = list(has_default = TRUE,
        default_value = 0L, rank = 0, min = -Inf, max = Inf,
        integer = FALSE)),

    simulate = function(steps, data, state, index = NULL,
                        n_threads = 1L, seed = NULL,
                        return_state = FALSE) {
      dust_carehomes_simulate(steps, data, state, index, n_threads, seed,
                             return_state)
    }
  ),

  public = list(
    initialize = function(data, step, n_particles, n_threads = 1L,
                          seed = NULL) {
      res <- dust_carehomes_alloc(data, step, n_particles,
                        n_threads, seed)
      private$data_ <- data
      private$n_threads_ <- n_threads
      private$ptr_ <- res[[1L]]
      private$info_ <- res[[2L]]
    },

    name = function() {
      "carehomes"
    },

    param = function() {
      private$param_
    },

    run = function(step_end) {
      m <- dust_carehomes_run(private$ptr_, step_end)
      rownames(m) <- names(private$index_)
      m
    },

    set_index = function(index) {
      dust_carehomes_set_index(private$ptr_, index)
      private$index_ <- index
      invisible()
    },

    index = function() {
      private$index_
    },

    n_threads = function() {
      private$n_threads_
    },

    set_state = function(state, step = NULL) {
      dust_carehomes_set_state(private$ptr_, state, step)
    },

    reset = function(data, step) {
      private$info_ <- dust_carehomes_reset(private$ptr_, data, step)
      private$index_ <- NULL
      private$data_ <- data
      invisible()
    },

    set_data = function(data) {
      private$info_ <- dust_carehomes_set_data(private$ptr_, data)
      private$data_ <- data
    },

    state = function(index = NULL) {
      m <- dust_carehomes_state(private$ptr_, index)
      rownames(m) <- names(index)
      m
    },

    step = function() {
      dust_carehomes_step(private$ptr_)
    },

    reorder = function(index) {
      dust_carehomes_reorder(private$ptr_, as.integer(index))
      invisible()
    },

    info = function() {
      private$info_
    },

    data = function() {
      private$data_
    },

    rng_state = function(first_only = FALSE) {
      dust_carehomes_rng_state(private$ptr_, first_only)
    },

    set_rng_state = function(rng_state) {
      dust_carehomes_set_rng_state(private$ptr_, rng_state)
      invisible()
    },

    has_openmp = function() {
      dust_carehomes_has_openmp()
    },

    set_n_threads = function(n_threads) {
      prev <- private$n_threads_
      dust_carehomes_set_n_threads(private$ptr_, n_threads)
      private$n_threads_ <- n_threads
      invisible(prev)
    }
  ))
class(carehomes) <- c("dust_generator", class(carehomes))
## Generated by odin.dust (version 0.1.5) - do not edit
basic$set("public", "transform_variables", function(y) {
    info <- self$info()
    set_dim <- function(x, dimx) {
        if (length(dimx) > 1L) {
            dim(x) <- dimx
        }
        x
    }
    if (is.matrix(y)) {
        n <- ncol(y)
        Map(function(i, d) set_dim(y[i, , drop = FALSE], c(d,
            n)), info$index, info$dim)
    } else if (is.array(y)) {
        n <- dim(y)[2:3]
        Map(function(i, d) set_dim(y[i, , , drop = FALSE], c(d,
            n)), info$index, info$dim)
    } else {
        Map(function(i, d) set_dim(y[i], d), info$index, info$dim)
    }
})
carehomes$set("public", "transform_variables", function(y) {
    info <- self$info()
    set_dim <- function(x, dimx) {
        if (length(dimx) > 1L) {
            dim(x) <- dimx
        }
        x
    }
    if (is.matrix(y)) {
        n <- ncol(y)
        Map(function(i, d) set_dim(y[i, , drop = FALSE], c(d,
            n)), info$index, info$dim)
    } else if (is.array(y)) {
        n <- dim(y)[2:3]
        Map(function(i, d) set_dim(y[i, , , drop = FALSE], c(d,
            n)), info$index, info$dim)
    } else {
        Map(function(i, d) set_dim(y[i], d), info$index, info$dim)
    }
})
